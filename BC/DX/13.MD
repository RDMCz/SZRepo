# 13

> Rekurze a její použití. Rekurzivní a nerekurzivní realizace vybraných algoritmů. Využití zásobníku programu.

## Rekurze

* Funkce volající sama sebe (dříve, než je dokončeno její původní volání)
* Každý rekurzivní algoritmus lze řešit i iteračně
* Tři podmínky rekurze:
  1. Musí být definována ukončovací podmínka algoritmu
  2. V každém kroku rekurze musí dojít ke zjednodušení problému
  3. Test ukončení předchází rekurzivnímu volání funkce
* Přímá/nepřímá, lineární/stromová
* Výhody:
  * Lze definovat nekonečný počet kroků/objektů/... pomocí jednoduchého konečného zápisu
  * Umožňuje krátký a přehledný zápis
* Není vhodné na vše, např. Fibonacci při každém průchodu zdvojnásobuje počet volání a zbytečně počítá stejné hodnoty (lze cachovat – tabelace)
* Rekurzi není vhodné použít:
  * Pokud se rekurze chová nestabilně/nepředvídatelně
  * Pokud máme k dispozici iterační algoritmus se stejnou/lepší složitostí
* Backtracing – prohledávání s návratem
  * Jakmile se dostanu do slepé uličky, tak se můžu po svých stopách o jeden či více kroků vrátit zpět, a na každé úrovni zkusit jiné možnosti
  * Rekurzivní postup vpřed, pamatuje si, kudy prošla, při nárazu se vrací a zkouší jiné možnosti vpřed
  * Problém osmi dam, hledání cesty v bludišti

## Příklady rekurze

* //TODO (ne)rekurze

## Zásobník programu

* Rekurzi reálně používáme v situacích, kdy se nejedná o lineární rekurzi
  * Problém má v těchto případech obvykle přirozeně rekurzivní strukturu
  * Řešení iterativním způsobem by bylo složité
  * Volání metod má ale režii a zatěžuje běh programu
* Jakmile je zavolána metoda, je pro její běh přidělena část paměti na zásobníku, využívá se pro:
  * Parametry
  * Lokální proměnné
  * Režii pro návrat z metody
* Po ukončení metody (doběhl poslední příkaz nebo příkazem `return`) se paměť přidělená v oblasti zásobníku uvolní pro další použití
* I když se nejedná o nekonečnou rekurzi, může nastat chyba StackOverflow
  * Vyčerpání paměti zásobníku programu
  * Při rekurzi totiž metody nejsou ukončeny, dokud to nedoběhne celé, a tedy neuvolňuje se místo v zásobníku
  * Některé jazyky mají limit maximální hloubky rekurze

---
[>>>](./14.MD)
